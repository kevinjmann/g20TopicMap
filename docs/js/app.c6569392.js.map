{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Main.vue?f695","webpack:///src/components/Main.vue","webpack:///./src/App.vue?c171","webpack:///./src/components/Main.vue?6005","webpack:///./src/utils/loadAndProcessData.js","webpack:///./src/utils/topicDisplay.js","webpack:///./src/components/Main.vue?27d4","webpack:///./src/components/Main.vue?b154","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","vm","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","ref","on","handleCollapse","_m","_v","loadAndProcessData","Promise","all","d3","then","topoData","countryTopics","countries","topojson","objects","features","forEach","properties","topics","curTopicIdx","topicDisplay","selection","props","topicData","path","raise","animateLine","pathElem","finalPath","stepDuration","trim","attr","startsWith","endPos","pathSoFar","pathSpl","split","cumulDelay","transition","delay","duration","attrTween","lineTween","console","log","prepareTextBox","gElem","append","text","existingPath","lastL","lastLSpl","lastCoords","x0","y0","x1","y1","interpolate","join","selectAll","remove","topic","topicPath","showMap","timer","pathGenerator","initialized","setFrance","x","min","max","desiredCountryPaths","gPool","tmp_g","g","franceCopy","dx","p1","p2","Math","sqrt","dy","selectedCountry","area","selectedCountryMinArea","topicG","pathsG","toReclaim","centroid","a","reverse","activeGs","idx","desiredCountryCentroid","type","coordinates","random","abortFlag","curG","minArea","toggleProjection","clickMsg","toProjection","projection1","curProjection","elem","svg","stop","projectionTween","projection0","projection","project","λ","φ","p0","_","desiredCountries","includes","rotate","velocity","render","document","querySelector","onclick","ldaElsByCountry","mounted","countryKeys","visPathsByCountry","country","tmpDivOuter","setAttribute","tmpDivCard","tmpDivInner","tmpIframe","ldaPath","appendChild","methods","miniSvg","$refs","mainMap","cloneNode","miniPicContainer","lastChild","removeChild","component","components","Main","Vue","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.c6569392.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&lang=scss&\"","<template>\n  <div>\n    <div class=\"pos-f-t mainMapContainer\">\n      <div class=\"navbar-collapse collapse show\" id=\"navbarToggleExternalContent\">\n        <div class=\"bg-dark p-4\">\n          <svg\n            ref=\"mainMap\"\n            viewBox=\"0 0 1500 900\"\n            width=\"1500\"\n            height=\"auto\"\n            preserveAspectRatio=\"xMidYMid\"\n          />\n        </div>\n      </div>\n      <nav class=\"navbar navbar-dark bg-dark\">\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarToggleExternalContent\"\n          aria-controls=\"navbarToggleExternalContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n          visibility=\"hidden\"\n          @click=\"handleCollapse\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div ref=\"miniPicContainer\"></div>\n      </nav>\n    </div>\n    <div>\n      <br />\n      <br />\n      <br />\n    </div>\n    <!-- Draggable default card start -->\n    <div class=\"card\">\n      <div class=\"card-header\">\n        <h5>Drag and drop cards</h5>\n      </div>\n      <div class=\"card-block\">\n        <div class=\"row\" id=\"sortable\">\n          <!-- <div class=\"col-xxl-6\">\n            <div class=\"card-sub\">\n              <div class=\"embed-responsive embed-responsive-4by3 myCard\">\n                <iframe\n                  scrolling=\"no\"\n                  frameborder=\"0\"\n                  style=\"position:absolute;top:0px;width:100vw;height:100vh;min-width:1680px;min-height:866px;\"\n                  src=\"/lda_visualizations/en-mallet.html\"\n                ></iframe>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-xxl-6\">\n            <div class=\"card-sub\">\n              <div class=\"embed-responsive embed-responsive-4by3 myCard\">\n                <iframe\n                  scrolling=\"no\"\n                  frameborder=\"0\"\n                  style=\"position:absolute;top:0px;width:100vw;height:100vh;min-width:1680px;min-height:866px;\"\n                  src=\"/lda_visualizations/en-default.html\"\n                ></iframe>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-xxl-6\">\n            <div class=\"card-sub\">\n              <div class=\"embed-responsive embed-responsive-4by3 myCard\">\n                <iframe\n                  scrolling=\"no\"\n                  frameborder=\"0\"\n                  style=\"position:absolute;top:0px;width:100vw;height:100vh;min-width:1680px;min-height:866px;\"\n                  src=\"/lda_visualizations/en-default.html\"\n                ></iframe>\n              </div>\n            </div>\n          </div> -->\n        </div>\n      </div>\n    </div>\n    <!-- Draggable default card start -->\n  </div>\n</template>\n<script>\nimport { loadAndProcessData } from \"../utils/loadAndProcessData.js\";\n// import {colorLegend} from './colorLegend.js';\nimport { topicDisplay } from \"../utils/topicDisplay.js\";\nimport * as d3 from \"d3\";\nimport $ from \"jquery\";\nimport \"jquery-ui/themes/base/core.css\";\nimport \"jquery-ui/themes/base/theme.css\";\nimport \"jquery-ui/themes/base/selectable.css\";\nimport \"jquery-ui/ui/core\";\nimport \"jquery-ui/ui/widgets/selectable\";\nimport \"jquery-ui/ui/widgets/sortable\";\nimport \"jquery-ui/ui/disable-selection\";\n\nvar vm;\n// import Vue from 'vue';\n\nfunction showMap() {\n  const svg = d3.select(\"svg\");\n  \n  const width = parseFloat(svg.attr(\"width\"));\n  const aspectRatio = 900 / 1500;\n  const height = width * aspectRatio;\n  const clickMsg = svg.append('text')\n                .text('click to start')\n                .attr('fill','white')\n                .attr('x', width/2)\n                .attr('text-anchor','middle')\n                .attr('y',15)\n                .attr('font-size','1.3em');\n  // const sensitivity = 75;\n  const velocity = 0.015;\n  const topicLifeTimer = 200;\n  const minTopicDistance = 50;\n  const projection0 = d3\n    .geoOrthographic()\n    .scale(height / 2.5)\n    .translate([width / 2, height / 2]);\n\n  let projection = projection0;\n  let projection1 = d3\n    .geoNaturalEarth1()\n    .translate([width / 2, height / 2])\n\n    .scale(height / 10);\n  let curProjection = 0;\n  var timer;\n\n  var pathGenerator = d3.geoPath().projection(projection);\n  let features;\n  // let centroid;\n  let selectedCountryMinArea;\n  let topicVisibleWindow = [300, 600];\n  var initialized = false;\n  var setFrance = false;\n\n  const inRange = (x, min, max) => {\n    return (x - min) * (x - max) <= 0;\n  };\n  const desiredCountries = [\n    \"Australia\",\n    \"Canada\",\n    \"Saudi Arabia\",\n    \"United States of America\",\n    \"India\",\n    \"Russia\",\n    \"South Africa\",\n    \"Turkey\",\n    \"Argentina\",\n    \"Brazil\",\n    \"Mexico\",\n    \"France\",\n    \"Germany\",\n    \"Italy\",\n    \"United Kingdom\",\n    \"China\",\n    \"Indonesia\",\n    \"Japan\",\n    \"South Korea\",\n    \"Spain\"\n  ];\n  //possible paths for the line showing a given topic, there are 4 options\n  //first element is path string, second is relative end coordinates\n  const possTopicPaths = [\n    [\"M 0 0 L -10 -10 L -60 -10\", [-60, -10]], //upleft\n    [\"M 0 0 L 10 -10 L 60 -10\", [60, -10]], //upright\n    [\"M 0 0 L 10 10 L 60 10\", [60, 10]], //downright\n    [\"M 0 0 L -10 10 L -60 10\", [-60, 10]] //downleft\n  ];\n  var desiredCountryPaths = [];\n  const g = svg.append(\"g\");\n  let gPool = [];\n  for (let i = 0; i < 10; i++) {\n    let tmp_g = g.append(\"g\");\n    gPool.push(tmp_g);\n  }\n  let activeGs = [];\n\n  g.append(\"path\")\n    .attr(\"d\", pathGenerator({ type: \"Sphere\" }))\n    .attr(\"class\", \"horizon\");\n\n  // const colorValue = d => d.properties.name;\n  let selectedCountry = null;\n  let selectedCountries = [];\n  // const colorLegendG = svg.append('g');\n  const topicG = g.append(\"g\");\n\n  const distance2 = (p1, p2) => {\n    var dx = p1[0] - p2[0],\n      dy = p1[1] - p2[1];\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n  var franceCopy;\n  //   var franceCopy1;\n  // var franceCopy2;\n\n  // render fxn\n  const render = () => {\n    const paths = g.selectAll(\"path\").data(features);\n\n    const colorScale = t => d3.interpolateTurbo(t);\n    // colorScale.domain(d3.range(features.length));\n    // colorScale.range(d3.schemeRdYlGn[colorScale.domain().length]);\n    // colorScale.domain(colorScale.domain().sort());\n\n    const pathsG = paths.enter().append(\"g\");\n    if (selectedCountry) {\n      if (pathGenerator.area(selectedCountry) > selectedCountryMinArea) {\n        let tmp_c = pathGenerator.centroid(selectedCountry);\n        topicG\n          .attr(\"visibility\", \"visible\")\n          .attr(\"transform\", `translate(${tmp_c[0]},${tmp_c[1]})`);\n      } else {\n        topicG.attr(\"visibility\", \"hidden\");\n      }\n    }\n    pathsG\n      .append(\"path\")\n      .attr(\"class\", \"countries\")\n      .merge(paths)\n      .attr(\"d\", pathGenerator)\n      .attr(\"fill\", (d, i) => {\n        // return selectedCountries.includes(d) // === selectedCountry\n        //   ? colorScale(i / features.length)\n        //   : \"grey\";\n        if (selectedCountries.includes(d)){\n          return colorScale(i / features.length);\n        }\n        else if(desiredCountries.includes(d.properties.name)){\n          return \"grey\";\n        }\n        else{\n          return \"darkgrey\";\n        }\n      })\n      .on(\"click\", d => {\n        if (initialized) {\n          selectedCountry = d;\n          // console.log(d);\n\n          if (!desiredCountries.includes(selectedCountry.properties.name)) {\n            return;\n          }\n          let sortable = document.getElementById('sortable');\n          if (selectedCountries.includes(d)) {\n            selectedCountries.splice(selectedCountries.indexOf(d), 1);\n            vm.ldaElsByCountry[d.properties.name].forEach(lda => {\n              sortable.removeChild(lda);\n            });\n          } else {\n            selectedCountries.push(d);\n            //       <div class=\"col-xxl-6\">\n            //                             <div class=\"card-sub\">\n            //                                   <div class=\"embed-responsive embed-responsive-4by3 myCard\">\n            //                                     <iframe  scrolling=\"no\" frameborder=\"0\"\n            // style=\"position:absolute;top:0px;width:100vw;height:100vh;min-width:1680px;min-height:866px;\" src=\"/lda_visualizations/en-mallet.html\"></iframe>\n            //                                   </div>\n\n            //                             </div>\n            //                         </div>\n            // let tmpDivOuter = document.createElement(\"div\");\n            // tmpDivOuter.setAttribute(\"class\", \"col-xxl-6\");\n            // let tmpDivCard = document.createElement(\"div\");\n            // tmpDivCard.setAttribute(\"class\", \"card-sub\");\n            // let tmpDivInner = document.createElement(\"div\");\n            // tmpDivInner.setAttribute(\n            //   \"class\",\n            //   \"embed-responsive embed-responsive-4by3 myCard\"\n            // );\n            // let tmpIframe = document.createElement(\"iframe\");\n            // tmpIframe.setAttribute(\"scrolling\", \"no\");\n            // tmpIframe.setAttribute(\"frameborder\", \"0\");\n            // tmpIframe.setAttribute(\"class\", \"lda-vis\");\n            // tmpIframe.setAttribute(\"src\", \"/lda_visualizations/en-mallet.html\");\n            // tmpDivInner.appendChild(tmpIframe);\n            // tmpDivCard.appendChild(tmpDivInner);\n            // tmpDivOuter.appendChild(tmpDivCard);\n\n            vm.ldaElsByCountry[d.properties.name].forEach(lda => {\n              sortable.appendChild(lda);\n            })\n          }\n          //   centroid = pathGenerator.centroid(d);\n          // selectedCountryMinArea = pathGenerator.area(selectedCountry) / 10;\n          // topicG.attr('transform', `translate(${centroid[0]},${centroid[1]})`)\n          // topicG.call(topicDisplay, { topicData: '', path:possTopicPaths[0][0]})\n          // pathGenerator = d3.geoPath().projection(projection);\n          render();\n        }\n      });\n\n    pathsG.append(\"svg:title\").text(d => d.properties.name);\n    let toReclaim = [];\n    for (let i = 0; i < activeGs.length; i++) {\n      let d = activeGs[i];\n      if (d[2] <= 0) {\n        d[0].selectAll(\"path\").remove();\n        d[0].selectAll(\"text\").remove();\n        toReclaim.push(i);\n      } else {\n        let c;\n        let a;\n        if (d[1].properties.name === \"France\") {\n          c = pathGenerator.centroid(franceCopy);\n          a = pathGenerator.area(franceCopy);\n        } else {\n          c = pathGenerator.centroid(d[1]);\n          a = pathGenerator.area(d[1]);\n        }\n        if (d[0]) {\n          if (a > d[3]) {\n            d[0].attr(\"visibility\", \"visible\");\n            d[0].attr(\"transform\", `translate(${c[0]},${c[1]})`);\n          } else {\n            d[0].attr(\"visibility\", \"hidden\");\n          }\n        } else {\n          // console.log(activeGs[i]);\n        }\n        d[2]--;\n      }\n    }\n    toReclaim.reverse().forEach(idx => {\n      gPool.push(activeGs[idx][0]);\n      activeGs.splice(idx, 1);\n    });\n\n    if (!initialized) {\n      //loop through countries with data\n      if (gPool.length > 0) {\n        //check if g available\n        for (let i = 0; i < desiredCountryPaths.length; i++) {\n          let d = desiredCountryPaths[i];\n          // console.log(d);\n          var desiredCountryCentroid;\n          if (d.properties.name === \"France\") {\n            if (!setFrance) {\n              franceCopy = {\n                type: \"Polygon\",\n                coordinates: [d.geometry.coordinates[1][0]]\n              };\n              setFrance = true;\n            }\n\n            desiredCountryCentroid = pathGenerator.centroid(franceCopy);\n          } else {\n            desiredCountryCentroid = pathGenerator.centroid(d);\n          }\n          if (\n            inRange(\n              desiredCountryCentroid[0],\n              topicVisibleWindow[0],\n              topicVisibleWindow[1]\n            )\n          ) {\n            if (Math.random() > 0.9) {\n              if (gPool.length > 0) {\n                let abortFlag = false;\n                let topicPath;\n                //decide the topic path\n                if (activeGs.length > 0) {\n                  let clashing = []; //\n                  activeGs.forEach(activeG => {\n                    //check if existing topic paths clash with bounding box around potential topic paths for new node\n                    let activeCent = pathGenerator.centroid(activeG[1]);\n                    let activeEnd = activeG[4];\n                    let activePos = [\n                      activeCent[0] + activeEnd[0],\n                      activeCent[1] + activeEnd[1]\n                    ]; // rough textbox position\n                    if (\n                      inRange(\n                        activePos[0],\n                        desiredCountryCentroid[0] - 80,\n                        desiredCountryCentroid[0] + 80\n                      ) &&\n                      inRange(\n                        activePos[1],\n                        desiredCountryCentroid[1] - 25,\n                        desiredCountryCentroid[1] + 25\n                      )\n                    ) {\n                      clashing.push(activePos);\n                    }\n                  });\n\n                  if (clashing.length > 0) {\n                    // get far away enough possible path from all clashing activeGs\n                    for (let i = 0; i < possTopicPaths.length; i++) {\n                      let curDist = 0;\n                      let hypPoint = possTopicPaths[i][1];\n                      let curPoint = [\n                        hypPoint[0] + desiredCountryCentroid[0],\n                        hypPoint[1] + desiredCountryCentroid[1]\n                      ];\n                      let pathOk = true;\n                      for (let j = 0; j < clashing.length; j++) {\n                        curDist = distance2(clashing[j], curPoint);\n                        if (curDist < minTopicDistance) {\n                          // not good enough\n                          pathOk = false;\n                          break;\n                        }\n                      }\n                      if (pathOk) {\n                        topicPath = possTopicPaths[i];\n                        break;\n                      }\n                    }\n                    if (!topicPath) {\n                      abortFlag = true;\n                    }\n                  } else {\n                    topicPath =\n                      possTopicPaths[\n                        Math.floor(Math.random() * possTopicPaths.length)\n                      ];\n                  }\n                } else {\n                  topicPath =\n                    possTopicPaths[\n                      Math.floor(Math.random() * possTopicPaths.length)\n                    ];\n                }\n                if (!abortFlag) {\n                  let curG = gPool.pop();\n                  curG.attr(\n                    \"transform\",\n                    `translate(${desiredCountryCentroid[0]},${desiredCountryCentroid[1]})`\n                  );\n                  curG.call(topicDisplay, {\n                    topicData: d.topics[d.curTopicIdx],\n                    path: topicPath[0]\n                  });\n                  d.curTopicIdx++;\n                  d.curTopicIdx %= d.topics.length;\n                  let minArea;\n                  if (d.properties.name === \"France\") {\n                    minArea = pathGenerator.area(franceCopy) / 10;\n                  } else {\n                    minArea = pathGenerator.area(d) / 10;\n                  }\n                  activeGs.push([\n                    curG, //g element to render the topic line\n                    d, //associated data element\n                    topicLifeTimer, //life time for topic to be visible\n                    minArea, //minimum visible area of country for topic to be visible\n                    topicPath[1] //path rel end position?\n                  ]);\n                }\n              } else {\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  // const selectCat = (d) => {\n  //   selectedCat = d;\n  //   render();\n  // }\n  function toggleProjection() {\n    if (!initialized) {\n      clickMsg.attr('stroke','none');\n      let toProjection;\n      selectedCountry = null;\n      toProjection = projection1;\n      curProjection = 1;\n      activeGs.forEach(elem => {\n        elem[0]\n          .select(\"g\")\n          .selectAll(\"path\")\n          .remove();\n        elem[0]\n          .select(\"g\")\n          .selectAll(\"text\")\n          .remove();\n      });\n      topicG\n        .selectAll(\"g\")\n        .selectAll(\"text\")\n        .remove();\n      topicG\n        .selectAll(\"g\")\n        .selectAll(\"path\")\n        .remove();\n      gPool = null;\n      activeGs = [];\n      svg.selectAll(\"text\").remove();\n      // console.log(franceCopy);\n      \n\n\n\n      timer.stop();\n\n      svg\n        .selectAll(\"path\")\n        .transition()\n        .duration(1000)\n        .attrTween(\"d\", function(d) {\n          let currentScale = projection.scale();\n          let nextScale = height / 4;\n          // let curTranslate = projection.translate();\n          var r = d3.interpolate(projection.rotate(), [0, 0, 0]);\n          var s = d3.interpolate(currentScale, nextScale);\n          // var trans = d3.interpolate(curTranslate, [\n          //   curTranslate[0],\n          //   height / 5\n          // ]);\n          return function(t) {\n            projection\n              .rotate(r(Math.pow(t, 0.33)))\n              // .translate(trans(t))\n              .scale(\n                currentScale > nextScale\n                  ? s(Math.pow(t, 0.1))\n                  : s(Math.pow(t, 3))\n              );\n            pathGenerator.projection(projection);\n            if (t === 1) {\n              if (curProjection === 1) projection = projection1;\n              else if (curProjection === 0) projection = projection0;\n              // projection.translate([projection.translate()[0], height / 4.3]);\n              pathGenerator.projection(projection);\n            }\n            return pathGenerator(d);\n          };\n        })\n        .transition()\n        .duration(1000)\n        .attrTween(\"d\", projectionTween(projection, toProjection));\n      pathGenerator = d3.geoPath().projection(toProjection);\n      // svg.call(d3.zoom()\n      //         .on('zoom', () => {\n      //           g.attr('transform', d3.event.transform);\n\n      //           // gPool.forEach(elem => {\n      //           //   elem.attr('transform', d3.event.transform);\n      //           // })\n      //         }));\n      initialized = true;\n      svg\n        .transition()\n        .duration(1000)\n        .attr(\"width\", 900);\n        \n      svg.append('text')\n        .text('Click one of the available countries to see the topic models')\n        .attr('fill','white')\n        .attr('x', width/2)\n        .attr('y',30)\n        .attr('text-anchor','middle')\n        .attr('font-size','2em');\n        \n    }\n  }\n\n  function projectionTween(projection0, projection1) {\n    return function(d) {\n      var t = 0;\n      var projection = d3\n        .geoProjection(project)\n        .scale(1)\n        .translate(projection0.translate());\n      var path = d3.geoPath(projection);\n\n      function project(λ, φ) {\n        (λ *= 180 / Math.PI), (φ *= 180 / Math.PI);\n        var p0 = projection0([λ, φ]),\n          p1 = projection1([λ, φ]);\n        return [(1 - t) * p0[0] + t * p1[0], (1 - t) * -p0[1] + t * -p1[1]];\n      }\n      return function(_) {\n        t = _;\n        if (path(d)) return path(d);\n        else return \"M 0 0\";\n      };\n    };\n  }\n\n  // let selectedCat = null;\n  loadAndProcessData().then(countries => {\n    countries.features.forEach(d => {\n      if (desiredCountries.includes(d.properties.name)) {\n        desiredCountryPaths.push(d);\n      }\n    });\n    features = countries.features;\n    timer = d3.timer(t => {\n      projection.rotate([velocity * t]);\n      render();\n    });\n  });\n  // let btn = document.createElement('button')\n  // btn.innerHTML = 'toggle'\n  document.querySelector(\"svg\").onclick = toggleProjection;\n  // document.getElementById('buttonContainer').appendChild(btn);\n}\n\nexport default {\n  data() {\n    return {\n      ldaElsByCountry: {\n        \n      },\n      \n    };\n  },\n  mounted() {\n    vm = this;\n    showMap();\n    $(\"#sortable\").sortable();\n    $(\"#sortable\").disableSelection();\n    d3.json('/lda_visualizations/visualizationPathsByCountry.json').then(visPathsByCountry => {\n      let countryKeys = Object.keys(visPathsByCountry);\n      countryKeys.forEach(country => {\n        this.ldaElsByCountry[country] = [];\n        visPathsByCountry[country].forEach(ldaPath => {\n          let tmpDivOuter = document.createElement(\"div\");\n          tmpDivOuter.setAttribute(\"class\", \"col-xxl-6\");\n          let tmpDivCard = document.createElement(\"div\");\n          tmpDivCard.setAttribute(\"class\", \"card-sub\");\n          let tmpDivInner = document.createElement(\"div\");\n          tmpDivInner.setAttribute(\n            \"class\",\n            \"embed-responsive embed-responsive-4by3 myCard\"\n          );\n          let tmpIframe = document.createElement(\"iframe\");\n          tmpIframe.setAttribute(\"scrolling\", \"no\");\n          tmpIframe.setAttribute(\"frameborder\", \"0\");\n          tmpIframe.setAttribute(\"class\", \"lda-vis\");\n          tmpIframe.setAttribute(\"src\", ldaPath);\n          tmpDivInner.appendChild(tmpIframe);\n          tmpDivCard.appendChild(tmpDivInner);\n          tmpDivOuter.appendChild(tmpDivCard);\n\n          this.ldaElsByCountry[country].push(tmpDivOuter);\n\n        })\n\n\n\n\n\n      })\n\n    })\n  },\n  methods: {\n    \n    handleCollapse() {\n      var miniSvg = this.$refs.mainMap.cloneNode(true);\n      while (this.$refs.miniPicContainer.lastChild) {\n        this.$refs.miniPicContainer.removeChild(\n          this.$refs.miniPicContainer.lastChild\n        );\n      }\n      miniSvg.setAttribute(\"class\", \"miniSvg\");\n      this.$refs.miniPicContainer.appendChild(miniSvg);\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.countries {\n  cursor: pointer;\n}\n// svg {\n//   border: solid 3px blue;\n// }\ng text {\n  color: white;\n}\n.miniSvg {\n  width: 20%;\n  opacity: 0.7;\n}\n.mainMapContainer {\n  position: absolute;\n  z-index: 99;\n  width: 100%;\n}\n.card {\n  z-index: 0;\n  // display: flex;\n  height: 100%;\n  width: 100%;\n  // flex-direction: column;\n}\n// .flex {\n//     -webkit-box-flex: 1;\n//     -ms-flex: 1 1 auto;\n//     flex: 1 1 auto\n// }\n\n.lda-vis {\n  position: absolute;\n  top: 0px;\n  width: 100vw;\n  height: 100vh;\n  min-width: 1680px;\n  min-height: 866px;\n}\n@media (max-width: 991.98px) {\n  .padding {\n    padding: 1.5rem;\n  }\n}\n\n@media (max-width: 767.98px) {\n  .padding {\n    padding: 1rem;\n  }\n}\n\n.padding {\n  padding: 3rem !important;\n}\n\n.card-sub {\n  cursor: move;\n  border: none;\n  display: inline-block;\n  min-width: 800px;\n  min-height: 600px;\n  max-width: 800px;\n  // min-width: 800px;\n  // flex-direction: column;\n  position: relative;\n  -webkit-box-shadow: 0 0 1px 2px rgba(0, 0, 0, 0.05),\n    0 -2px 1px -2px rgba(0, 0, 0, 0.04), 0 0 0 -1px rgba(0, 0, 0, 0.05);\n  box-shadow: 0 0 1px 2px rgba(0, 0, 0, 0.05),\n    0 -2px 1px -2px rgba(0, 0, 0, 0.04), 0 0 0 -1px rgba(0, 0, 0, 0.05);\n}\n\n.card-block {\n  padding: 1.25rem;\n  background-color: #fff !important;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: block;\n}\nmyCard {\n  min-width: 800px;\n  min-height: 600px;\n}\niframe {\n  -ms-zoom: 0.75;\n  -moz-transform: scale(0.6);\n  -moz-transform-origin: 0 0;\n  -o-transform: scale(0.6);\n  -o-transform-origin: 0 0;\n  -webkit-transform: scale(0.6);\n  -webkit-transform-origin: 0 0;\n}\n// File: theme.scss\n// Override default BT variables:\n$grid-breakpoints: (\n  xs: 0,\n  sm: 576px,\n  md: 768px,\n  lg: 992px,\n  xl: 1200px,\n  xxl: 1900px\n);\n\n$container-max-widths: (\n  sm: 540px,\n  md: 720px,\n  lg: 960px,\n  xl: 1140px,\n  xxl: 1610px\n);\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Main')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"pos-f-t mainMapContainer\"},[_c('div',{staticClass:\"navbar-collapse collapse show\",attrs:{\"id\":\"navbarToggleExternalContent\"}},[_c('div',{staticClass:\"bg-dark p-4\"},[_c('svg',{ref:\"mainMap\",attrs:{\"viewBox\":\"0 0 1500 900\",\"width\":\"1500\",\"height\":\"auto\",\"preserveAspectRatio\":\"xMidYMid\"}})])]),_c('nav',{staticClass:\"navbar navbar-dark bg-dark\"},[_c('button',{staticClass:\"navbar-toggler\",attrs:{\"type\":\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarToggleExternalContent\",\"aria-controls\":\"navbarToggleExternalContent\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",\"visibility\":\"hidden\"},on:{\"click\":_vm.handleCollapse}},[_c('span',{staticClass:\"navbar-toggler-icon\"})]),_c('div',{ref:\"miniPicContainer\"})])]),_vm._m(0),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('br'),_c('br'),_c('br')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('h5',[_vm._v(\"Drag and drop cards\")])]),_c('div',{staticClass:\"card-block\"},[_c('div',{staticClass:\"row\",attrs:{\"id\":\"sortable\"}})])])}]\n\nexport { render, staticRenderFns }","import * as d3 from 'd3';\nimport * as topojson from 'topojson';\nexport const loadAndProcessData = () =>\n\n        Promise.all([\n            d3.json('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json'),\n            d3.json('/lda_visualizations/countryTopics.json')\n            // d3.tsv('https://unpkg.com/world-atlas@1.1.4/world/110m.tsv')\n        ])\n        .then(([topoData, countryTopics]) => {\n            // const rowById = tsvData.reduce((accumulator, d) => {\n            //     accumulator[d.iso_n3] = d;\n            //     return accumulator;\n            //     }, {})\n\n            const countries = topojson.feature(topoData, topoData.objects.countries);\n            countries.features.forEach(d => {\n                // Object.assign(d.properties, rowById[d.id]);  \n                if(countryTopics[d.properties.name]){\n                    d.topics = countryTopics[d.properties.name];\n                    d.curTopicIdx =0;\n                }\n            })\n\n            return countries;\n        })\n    \n","import * as d3 from 'd3';\nexport const topicDisplay = (selection, props) => {\n    const {\n        topicData,\n        path\n    } = props\n    selection.raise();\n    // const rectangleWidth = 120;\n    const animateLine = (pathElem, finalPath, stepDuration) => {\n        finalPath = finalPath.trim();\n        pathElem.attr('fill', 'none')\n            .attr('stroke', 'white');\n        if (!finalPath.startsWith('M 0 0')) {\n            console.log('path needs to start from origin M 0 0');\n            return;\n        }\n        let pathSoFar = 'M 0 0';\n        let pathSpl = finalPath.split(' L ');\n        let cumulDelay = 0;\n        let endPos;\n        for (let i = 1; i < pathSpl.length; i++) {\n            endPos = pathSpl[i].split(' ');\n            pathElem.transition()\n                .delay(cumulDelay)\n                .duration(stepDuration)\n                .attrTween('d', lineTween(pathSoFar, endPos));\n            pathSoFar += ' L ' + pathSpl[i];\n            cumulDelay += stepDuration;\n        }\n        return {delay: cumulDelay, endPos: endPos}\n    }\n    const prepareTextBox = (gElem, finalPath, stepDuration) => {\n        let {delay, endPos} = animateLine(gElem.append('path'), finalPath, stepDuration);\n        gElem.append('text')\n            .text(topicData)\n            .attr('opacity', 0)\n            .attr('fill', 'white')\n            .attr('x', endPos[0])\n            .attr('y', endPos[1])\n            .attr('text-anchor', endPos[0] > 0 ? 'start': 'end')\n            .transition()\n            .delay(delay)\n            .duration(stepDuration)\n            .attr('opacity', 1);\n    }\n    const lineTween = (existingPath, endPos) => {\n        return function () {\n            let pathSpl = existingPath.split('L');\n            let lastL = pathSpl[pathSpl.length - 1];\n            let lastLSpl = lastL.split(' ');\n            let lastCoords = [lastLSpl[lastLSpl.length - 2], lastLSpl[lastLSpl.length - 1]]\n            let x0 = lastCoords[0]\n            let y0 = lastCoords[1]\n            let x1 = endPos[0]\n            let y1 = endPos[1]\n            var interpolate = d3.interpolate([x0, y0], [x1, y1]);\n            return function (t) {\n                return t < 1 ? `${existingPath} L ` + interpolate(t).join(' ') : `${existingPath} L  ${x1} ${y1}`;\n            }\n        }\n    }\n    selection.selectAll('path').remove();\n    selection.selectAll('text').remove();\n    selection.selectAll('rect').remove();\n    \n\n    let topic = selection.append('g');\n    \n    let topicPath = path;\n    \n    prepareTextBox(topic, topicPath, 1000);\n   \n\n\n}","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=5983ed7c&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Main></Main>\n  </div>\n</template>\n\n<script>\nimport Main from './components/Main';\nexport default {\n  name: 'App',\n  components: {\n    Main\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=230f33f5&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport 'bootstrap'; \nimport 'bootstrap/dist/css/bootstrap.min.css';\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n"],"sourceRoot":""}